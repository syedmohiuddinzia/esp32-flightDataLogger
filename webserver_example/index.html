<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 Datalogger</title>
    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
        }

        body {
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            text-align: center;
        }

        h1 {
            color: #333;
        }

        /* Style for buttons */
        .button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition-duration: 0.4s;
        }

        .button-record {
        background-color: #ff9800;
        color: #fff;
        }

        .button-recording {
            background-color: #4CAF50;
            color: #fff;
        }

        .button-data {
            background-color: #858585;
            color: #fff;
        }

        .button-delete {
            background-color: #780320;
            color: #fff;
        }

        .button-calibrate {
            background-color: #78035f;
            color: #fff;
        }

        .button-sos {
            background-color: #2f007a;
            color: #fff;
        }

        .button-sos-set {
            background-color: #5716be;
            color: #fff;
        }

        .button:hover {
            background-color: #0056b3;
        }

        /* Style for form elements (checkboxes and input fields) */
        .form-element {
            margin: 10px 0;
            padding: 10px;
            text-align: left;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-element input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #4CAF50;
            cursor: pointer;
        }

        .form-element input[type="text"] {
            padding: 10px;
            width: 80%;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        /* Label styling */
        .form-element label {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        /* Optional hover effect for the input */
        .form-element input[type="text"]:focus {
            border-color: #4CAF50;
            outline: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ESP32 Datalogger - Manage Data</h1>
        <a href="sos"><button class="button button-sos">HELP !!!</button></a>
        <a href="sos-set"><button class="button button-sos-set">Set SOS</button></a>
        <button id="recordButton" class="button button-record" onclick="toggleRecording()">Record</button><br>
        <a href="display"><button class="button button-data">Display Data</button></a>
        <a href="view-data"><button class="button button-data">View Data</button></a>
        <a href="download"><button class="button button-data">Download Data</button></a><br> 
        <a href="delete"><button class="button button-delete">Delete Data</button></a>
        <a href="calibrate"><button class="button button-calibrate">Calibrate Data</button></a>
        <a href="wifi-set"><button class="button button-delete">Set Wifi</button></a>

        <!-- Checkbox and input styling -->
        <div class="form-element">
            <input type="checkbox" id="imu1" name="imu1" value="imu1" onchange="sendCheckboxData('imu1', this.checked)">
            <label for="imu1">IMU 1</label>
        </div>

        <div class="form-element">
            <input type="checkbox" id="imu2" name="imu2" value="imu2" onchange="sendCheckboxData('imu2', this.checked)">
            <label for="imu2">IMU 2</label>
        </div>

        <div class="form-element">
            <input type="checkbox" id="imu3" name="imu3" value="imu3" onchange="sendCheckboxData('imu3', this.checked)">
            <label for="imu3">IMU 3</label>
        </div>

        <div class="form-element">
            <label for="value">INSERT TEXT:</label>
            <input type="text" id="value" name="value">
            <button class="button button-send" onclick="sendTextData()">Send</button>
        </div>

    </div>

    <script>
        function sendCheckboxData(sensor, state) {
            let url = "/" + sensor + "?state=" + (state ? "1" : "0");
            fetch(url)
                .then(response => console.log(sensor + " state changed: " + (state ? "ON" : "OFF")))
                .catch(error => console.error("Error sending request:", error));
        }

        function sendTextData() {
            let value = document.getElementById("value").value;
            if (value.trim() !== "") {  // Avoid sending empty text
                fetch("/insert?value=" + encodeURIComponent(value))
                    .then(response => console.log("Inserted text: " + value))
                    .catch(error => console.error("Error sending request:", error));
            } else {
                alert("Please enter some text before sending.");
            }
        }

        let isRecording = false;
        function toggleRecording() {
            isRecording = !isRecording;
            let button = document.getElementById("recordButton");
            button.innerText = isRecording ? "Recording" : "Record";
            button.className = isRecording ? "button button-recording" : "button button-record";
            
            fetch("/record?state=" + (isRecording ? "1" : "0"))
                .then(response => console.log("Recording state: " + (isRecording ? "ON" : "OFF")))
                .catch(error => console.error("Error sending request:", error));
        }
    </script>
</body>
</html>
